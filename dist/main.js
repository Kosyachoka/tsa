!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){var o=process.env.OPENSHIFT_NODEJS_PORT||8080,n=process.env.OPENSHIFT_NODEJS_IP||"127.0.0.1";const a=r(1);a.loadProvider({name:"ThePirateBayProxy",baseUrl:"https://pirateproxy.gdn",searchUrl:"/search/{query}/0/7/{cat}",categories:{All:"0",Audio:"100",Video:"200",Applications:"300",Games:"400",Porn:"500",Other:"600",Top100:"url:/top/all"},defaultCategory:"All",resultsPerPageCount:30,itemsSelector:"#searchResult tr",itemSelectors:{title:"a.detLink@text",time:'font.detDesc@text | match:"Uploaded\\s(.+?),"',seeds:"td:nth-child(3) | int",peers:"td:nth-child(4) | int",size:'font.detDesc@text | match:"Size\\s(.+?),"',magnet:'a[title="Download this torrent using magnet"]@href',desc:"div.detName a@href"},paginateSelector:'a:has(img[alt="Next"])@href',torrentDetailsSelector:"div.nfo > pre@text"}),a.enableProvider("1337x"),a.enableProvider("Torrentz2"),a.enableProvider("ThePirateBayProxy"),a.enableProvider("Rarbg"),console.log("Using providers:"),console.log(a.getActiveProviders().map(e=>e.name));var s=r(2),i=s();i.use(s.json()),i.get("/",(e,t,r)=>{t.statusCode=404,t.end()}),i.get("/ax",(e,t,r)=>{t.json({s:[],t:3e4})}),i.post("/",(e,t,r)=>{let o=e.body,n=function(e){switch(e){case"Torrent9":return"Rarbg";default:return e}}(o.torrent);if(function(e){return void 0!==e.query&&void 0!==e.category||(console.log('request check fail {params.query:"'+e.query+'", params.category:"'+e.category+'"}'),!1)}(o)){(void 0===n||""==n?a.search(o.query,o.category,15):a.search([n],o.query,o.category,15)).then(e=>{console.log("torrent:"+n+"| query:"+o.query+"| results:"+e.length),t.json(e),t.end()}).catch(e=>{console.log(e),t.statusCode=500,t.end()})}else t.statusCode=404,t.end()}),i.listen(o,n,()=>console.log("Listening on "+n+", port "+o))},function(e,t){e.exports=require("torrent-search-api")},function(e,t){e.exports=require("express")}]);